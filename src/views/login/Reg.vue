<template>    <div>        <header class="reg-header-con">            <img src="../../assets/reg/reg-back.jpg" alt="">        </header>        <main class="reg-main-con">            <div class="reg-container">                <van-form @submit="onSubmit" ref="regform">                    <div class="phone-con">                        <span class="iconfont icon-tel"></span>                        <van-field                                v-model="regform.phone"                                name="phone"                                placeholder="小主，留个电话吧"                                :rules="[{ required: true, message: '请填写用户名' }]"                        />                    </div>                    <div class="phone-con phone-container code-con">                        <div class="reg-yuandian-con">                            <div class="reg-yuandian"></div>                        </div>                        <van-field                                v-model="recode"                                name="recode"                                placeholder="我们的秘密"                                :rules="[{ required: true, message: '请填写验证码' }]"                        >                        </van-field>                        <button class="code-btn-con" type="button" v-show="!time" @click="handlecode">获取秘密</button>                        <button class="code-btn-con code-btn-con-g" type="button" v-show="time">{{time}}s</button>                    </div>                    <div class="phone-con phone-container">                        <span class="iconfont icon-suo"></span>                        <van-field                                v-model="regform.password"                                type="password"                                name="password"                                placeholder="我们来交换秘密吧"                                :rules="[{ required: true, message: '请填写密码' }]"                        >                        </van-field>                    </div>                    <div class="recording-con">                        <van-checkbox v-model="checked" checked-color="#EB666B" icon-size="0.3rem"                                      style="display: inline-block"></van-checkbox>                        <span>已阅读并同意</span>                        <a href="javascript:;">《软件许可及服务协议》</a>                    </div>                    <div class="reg-btn-con">                        <van-button round block type="info" native-type="submit"                                    :class="{'reg-btn-requeire':true,'reg-btn--disabled':checked===false}">                            立即注册                        </van-button>                    </div>                </van-form>            </div>        </main>    </div></template><script>    import {apiLogin} from "../../http/api";    import {SUCCESS} from "../../lib/base";    import Toast from "vant/lib/toast";    import 'vant/lib/toast/style'    export default {        name: "Reg",        data() {            return {                checked: false,                regform: {                    phone: '',                    password: ''                },                code: '1314',                recode: '',                time: 0            }        },        watch: {            checked() {                if (this.checked === true) {                    document.querySelector('.reg-btn-con button').removeAttribute('disabled');                } else {                    document.querySelector('.reg-btn-con button').setAttribute('disabled', 'disabled');                }            }        },        methods: {            onSubmit() {                if (this.recode === this.code) {                    apiLogin(this.regform).then(res => {                        if (res.code === SUCCESS) {                            Toast(res.msg);                        } else {                            Toast(res.msg);                        }                    }).catch(error => {                        console.log(error);                    })                } else {                    Toast('验证码错误');                }            },            handlecode() {                if (!this.time) {                    this.time = 60;                    let that = this;                    let t = setInterval(() => {                        if (that.time > 0) {                            that.time = that.time - 1;                        } else {                            clearInterval(t);                            this.time = 0;                        }                    }, 1000);                }            },            //js设置元素信息            setAttribute() {                document.querySelector('.reg-btn-con button').setAttribute('disabled', 'disabled');                let list = document.querySelectorAll('.van-field__control');                for (let i = 0; i < list.length; i++) {                    list[i].setAttribute('autocomplete', 'off');                }            }        }, mounted() {            this.setAttribute();        }    }</script><style src="../../style/reg.css" scoped></style>