<template>    <div class="list-con">        <div class="list-search">        </div>        <ul class="list-nav"><!--            <li :class="{active:order.field==='hid'}" @click="order.field='hid'">综合<i class="iconfont icon-xiajiantou"></i></li>--><!--            <li :class="{active:order.field==='hscore'}" @click="order.field='hscore'">位置<i class="iconfont icon-xiajiantou"></i></li>--><!--            <li :class="{active:order.field==='htime'}" @click="order.field='htime'">时间<i class="iconfont icon-xiajiantou"></i></li>--><!--            <li :class="{active:order.field==='hprice'}" @click="order.field='hprice'">价格<i class="iconfont icon-xiajiantou"></i></li>-->            <li v-for="(item,index) in orderArr" :key="index" :class="{active:order.field === item.field}" @click="handletype(item.field)">{{item.text}}<i :class="['iconfont',item.icon]"></i></li>        </ul>        <div class="homestay-list">            <div class="homestay-list-item">                <van-pull-refresh v-model="isPullrefresh" @refresh="handlePullRefresh" success-text="刷新成功啦"><!--                    列表初始化立即检查-->                    <van-List v-model="isUpper" :finished="upperFinished" :immediate-check="false" @load="handleUpper">                        <div :class="{'lodging-con':true,'list-con-show':true}"><!--                            列表循环-->                            <router-link :to="{path:'/detailh',query:{hid:item.hid}}" class="lodging-con-item"  v-for="item in homestay" :key="item.hid">                                <div class="loging-item-pic">                                    <img :src="item.hthumb" alt=""                                         class="lodging-item-img1">                                    <img src="../../assets/detail/lodging-heart.png" alt=""                                         class="lodging-item-img2">                                </div>                                <h1 class="lodging-item-title">{{item.hname}}</h1>                                <h5 class="lodging-item-add">{{item.hcity}}·{{item.harea}}</h5>                                <div class="lodging-star-con lodging-star-con1">                                    <van-rate v-model="item.hscore" allow-half void-icon="star" color="#F9AA00" void-color="#FDDD99" readonly />                                </div>                                <div class="lodging-price">                                    <span>RMB</span>                                    <h1 class="lodging-price-num">{{item.hprice}}</h1>                                    <h5>每晚</h5>                                </div>                            </router-link>                        </div>                    </van-List>                </van-pull-refresh>            </div>        </div>    </div></template><script>    import {PullRefresh,List,Toast} from 'vant';    import 'vant/lib/pull-refresh/style';    import 'vant/lib/list/style'    import 'vant/lib/toast/style'    import {apiList} from "../../http/api";    import {IMGURL, SUCCESS} from "../../lib/base";    export default {        name: "list",        components:{            VanPullRefresh:PullRefresh,            VanList:List        },data(){            return{                //下拉刷新                isPullrefresh:false,                //列表上拉                isUpper:false,                upperFinished:false,                paginate:{                    page:0,                    limit:6,                },                //排序规则 字段 综合 hid来排序 位置score  时间 htime 价格 hprice                order:{                    field:'hid',                    type:'desc',                },                orderArr:[                    {text:'综合',icon:"icon-xiajiantou",field:'hid'},                    {text:'位置',icon:"icon-xiajiantou",field:'hscore'},                    {text:'时间',icon:"icon-xiajiantou",field:'htime'},                    {text:'价格',icon:"icon-xiajiantou",field:'hprice'},                ],                homestay:[],                total:0,                value:2.5,                listshow:true,            }        },        methods:{            //返回到最初的样子 page =1            handlePullRefresh(){                this.listshow = false;                this.upperFinished = false;                this.paginate.page = 0;                this.homestay = [];                this.handleUpper();                this.isPullrefresh = false;                this.listshow = false;            },            //上拉情况            handleUpper(){                this.listshow = false;                this.paginate.page++;                let params = Object.assign({},this.paginate,this.order);                apiList(params).then(res=>{                    if (res.code===SUCCESS){                        !this.total&&(this.total = res.total);                        let data = res.data.map(ele=>{                            ele.hscore = Number(ele.hscore);                            ele.hthumb = IMGURL+ele.hthumb;                            return ele;                        })                        //合并                        this.homestay = this.homestay.concat(data);                        // this.homestay.push(...data);                        if(this.homestay.length>=this.total){                            this.upperFinished=true;                        }                        this.listshow = true;                    }else{                        Toast({                            message:res.msg                        })                    }                    this.isUpper = false;                    this.isPullrefresh = false;                }).catch(error=>{                    console.log(error);                })            },            handletype(field){                this.order.field = field;                this.handlePullRefresh();            }        },        mounted() {            this.handleUpper();        }    } </script><style scoped>@import url('../../style/list.css');</style>